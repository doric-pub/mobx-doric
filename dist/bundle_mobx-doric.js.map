{"version":3,"file":"bundle_mobx-doric.js","sources":["../build/lib/observer.js"],"sourcesContent":["import { Group } from \"doric\";\nimport { autorun } from \"mobx\";\nfunction combineView(oldV, newV) {\n    if (oldV.viewType() !== newV.viewType()) {\n        throw new Error(\"View type should be the same\");\n    }\n    for (let key in newV) {\n        if (key !== \"viewId\" &&\n            key !== \"__dirty_props__\" &&\n            key !== \"callbacks\" &&\n            key !== \"nativeViewModel\" &&\n            key !== \"children\") {\n            {\n                const v = Reflect.get(newV, key, newV);\n                if (!(v instanceof Function)) {\n                    Reflect.set(oldV, key, Reflect.get(newV, key, newV), oldV);\n                }\n            }\n        }\n    }\n    if (newV instanceof Group) {\n        if (!(oldV instanceof Group)) {\n            throw new Error(\"View type should be the same\");\n        }\n        if (oldV.children.length !== newV.children.length) {\n            oldV.removeAllChildren();\n            newV.children.forEach((child) => oldV.addChild(child));\n        }\n        else {\n            for (let i = 0; i < oldV.children.length; i++) {\n                combineView(oldV.children[i], newV.children[i]);\n            }\n        }\n    }\n}\nexport function observer(f) {\n    let v;\n    autorun(() => {\n        const nv = f();\n        if (!!!v) {\n            v = nv;\n            return;\n        }\n        combineView(v, nv);\n    });\n    return v;\n}\n//# sourceMappingURL=observer.js.map"],"names":["Group","autorun"],"mappings":";;;;;;;AAEA,SAAS,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE;AACjC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,EAAE;AAC7C,QAAQ,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;AACxD,KAAK;AACL,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,EAAE;AAC1B,QAAQ,IAAI,GAAG,KAAK,QAAQ;AAC5B,YAAY,GAAG,KAAK,iBAAiB;AACrC,YAAY,GAAG,KAAK,WAAW;AAC/B,YAAY,GAAG,KAAK,iBAAiB;AACrC,YAAY,GAAG,KAAK,UAAU,EAAE;AAChC,YAAY;AACZ,gBAAgB,MAAM,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AACvD,gBAAgB,IAAI,EAAE,CAAC,YAAY,QAAQ,CAAC,EAAE;AAC9C,oBAAoB,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AAC/E,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL,IAAI,IAAI,IAAI,YAAYA,WAAK,EAAE;AAC/B,QAAQ,IAAI,EAAE,IAAI,YAAYA,WAAK,CAAC,EAAE;AACtC,YAAY,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;AAC5D,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;AAC3D,YAAY,IAAI,CAAC,iBAAiB,EAAE,CAAC;AACrC,YAAY,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;AACnE,SAAS;AACT,aAAa;AACb,YAAY,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC3D,gBAAgB,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE,aAAa;AACb,SAAS;AACT,KAAK;AACL,CAAC;AACM,SAAS,QAAQ,CAAC,CAAC,EAAE;AAC5B,IAAI,IAAI,CAAC,CAAC;AACV,IAAIC,YAAO,CAAC,MAAM;AAClB,QAAQ,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC;AACvB,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;AAClB,YAAY,CAAC,GAAG,EAAE,CAAC;AACnB,YAAY,OAAO;AACnB,SAAS;AACT,QAAQ,WAAW,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAC3B,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,CAAC,CAAC;AACb;;;;"}